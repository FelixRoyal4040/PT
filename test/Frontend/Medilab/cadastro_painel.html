<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Painel de Cadastro | Medilab</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body{background:#f7f9fc;}
    .sidebar{min-height:100vh;background:#1977cc;color:#fff;}
    .sidebar a{color:#fff;text-decoration:none;display:block;padding:12px;border-radius:6px;}
    .sidebar a:hover{background:rgba(255,255,255,.15)}
    .card{border:none;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,.08)}
    .btn-primary{background:#1977cc;border:none}
    .btn-primary:hover{background:#145fa1}
    .active{
      background-color: rgba(255,255,255,.25);
    }
    .show{
      display:block;
    }
    section{
      display:none;
    }
  </style>
</head>
<body>
<div class="container-fluid">
  <div class="row">
    <aside class="col-md-2 sidebar p-3">
      <h4 class="mb-4">Medilab</h4>
      <a href="#medico" class="tab active" contentId="medico">Cadastro de Médicos</a>
      <a href="#paciente" class="tab" contentId="paciente">Cadastro de Pacientes</a>
      <a href="#paciente" class="tab" contentId="funcionario">Cadastro de Funcionarios</a>
    </aside>
    <main class="col-md-10 p-4">
      <section id="medico" class="mb-5 show">
        <h3 class="mb-3">Cadastro de Médicos</h3>
        <div class="card p-4">
          <form onsubmit="submitMedico(event);">
            <div class="row">
              <div class="col-md-6 mb-3">
                <label class="form-label">Nome Completo</label>
                <input type="text" name="name" class="form-control" id="nameMedico" placeholder="Dr. João Silva">
              </div>
              <div class="col-md-6 mb-3">
                <label class="form-label">Especialidade</label>
                <select name="speciality" id="speciality" class="form-select">
                  <option value="">Choose the speciality</option>
                  <option value="">Cardiologia</option>
                  <option value="">Pediatria</option>
                  <option value="">Clinica Geral</option>
                </select>
              </div>
              <div class="col-md-6 mb-3">
                <label class="form-label">Email</label>
                <input type="email" name="email" id="emailMedico" class="form-control">
              </div>
              <div class="col-md-6 mb-3">
                <label class="form-label">Telefone</label>
                <input type="tel" name="phone" id="phoneMedico" class="form-control">
              </div>
            </div>
            <button class="btn btn-primary">Cadastrar Médico</button>
          </form>
        </div>
      </section>

      <section id="paciente">
        <h3 class="mb-3">Cadastro de Pacientes</h3>
        <div class="card p-4">
          <form onsubmit="submitPaciente(event);">
            <div class="row">
              <div class="col-md-6 mb-3">
                <label class="form-label">Nome Completo</label>
                <input type="text" name="name" id="namePaciente" class="form-control">
              </div>
              <div class="col-md-3 mb-3">
                <label class="form-label">Data de Nascimento</label>
                <input type="date" name="data_nasc" id="data_nasc" class="form-control">
              </div>
              <div class="col-md-3 mb-3">
                <label class="form-label">Gênero</label>
                <select name="gender" id="gender" class="form-select" >
                  <option value="">Masculino</option>
                  <option value="">Feminino</option>
                </select>
              </div>
              <div class="col-md-6 mb-3">
                <label class="form-label">Email</label>
                <input type="email" name="email" id="emailPaciente" class="form-control">
              </div>
              <div class="col-md-6 mb-3">
                <label class="form-label">Telefone</label>
                <input type="tel" name="phone" id="phonePaciente" class="form-control">
              </div>
            </div>
            <button class="btn btn-primary">Cadastrar Paciente</button>
          </form>
        </div>
      </section>

      <section id="funcionario" class="mb-5">
        <h3 class="mb-3">Cadastro de Funcionarios</h3>
        <div class="card p-4">
          <form onsubmit="submitFuncionario(event);">
            <div class="row">
              <div class="col-md-6 mb-3">
                <label class="form-label">Nome Completo</label>
                <input type="text" name="name" class="form-control" id="nameFuncionario" placeholder="Dr. João Silva">
              </div>
              <div class="col-md-6 mb-3">
                <label class="form-label">Cargo</label>
                <select name="charge" id="charge" class="form-select">
                  <option value="">Choose the charge</option>
                  <option value="">Cardiologia</option>
                  <option value="">Pediatria</option>
                  <option value="">Clinica Geral</option>
                </select>
              </div>
              <div class="col-md-6 mb-3">
                <label class="form-label">Email</label>
                <input type="email" name="email" id="emailFuncionario" class="form-control">
              </div>
              <div class="col-md-6 mb-3">
                <label class="form-label">Telefone</label>
                <input type="tel" name="phone" id="phoneFuncionario" class="form-control">
              </div>
            </div>
            <button class="btn btn-primary">Cadastrar Funcionário</button>
          </form>
        </div>
      </section>
    </main>
  </div>
</div>

<script>
  const tabs = document.querySelectorAll('.tab');
  const sections = document.querySelectorAll('main section');

  tabs.forEach(tab => {
    tab.addEventListener('click', () => {
      
      tabs.forEach(t => {
        t.classList.remove('active');
      });

      tab.classList.add('active');
      
      sections.forEach(section => {
        section.classList.remove('show');
      });
      
      const contentId = tab.getAttribute('contentId');
      const sectionToShow = document.getElementById(contentId);
      
      sectionToShow.classList.add('show');
    });
  });
  
  
  function submitMedico(e) {
    e.preventDefault();
    alert('Médico!');
    const name = document.getElementById('nameMedico').value;
    const speciality = document.getElementById('speciality').value;
    const email = document.getElementById('emailMedico').value;
    const phone = document.getElementById('phoneMedico').value;

    fetch('../../Backend/cadastro_medic.php', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        name: name, 
        speciality:speciality, 
        email: email, 
        phone: phone 
      })
    })
    .then(response => response.json())
    .then(data => {
      if(data.success){
        alert(data.message);
        window.location.href = 'dashboard.php';
      } else {
        alert(data.message);
      }
      alert('Médico cadastrado com sucesso!');
    })
    .catch(error => {
      console.error('Error:', error);
      alert('Erro ao cadastrar médico.');
    });
  }

  
  function submitPaciente(e) { 
    e.preventDefault();
    alert('Paciente');
    const name = document.querySelector('#namePaciente').value;
    const data_nasc = document.querySelector('#data_nasc').value;
    const gender = document.querySelector('#gender').value;
    const email = document.querySelector('#emailPaciente').value;
    const phone = document.querySelector('#phonePaciente').value;

    fetch('../../Backend/cadastro_pacient.php', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        name: name,
        data_nasc: data_nasc,
        gender: gender,
        email: email,
        phone: phone
      })
    })
    .then(res=>res.json())
    .then(data => {
      if(data.success){
        alert(data.message);
        window.location.href = 'dashboard.php';
      }else{
        alert(data.message);
      }
    })
    .catch(e => {
      console.error(`Error: ${e}`);
      alert('Erro ao cadastrar o paciente');
    });
  }

  function submitFuncionario(e) {
    e.preventDefault();
    alert('Funcionario');
    const body = {
      name: document.querySelector('#nameFuncionario').value,
      charge: document.querySelector('#charge').value,
      email: document.querySelector('#emailFuncionario').value,
      phone: document.querySelector('#phoneFuncionario').value
    }

    fetch('../../Backend/cadastro_funcionari.php', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify(body)
    })
    .then(res=>res.json())
    .then(data => {
      if(data.success){
        alert(data.message);
        window.location.href = 'dashboard.php';
      }else{
        alert(data.message);
      }
    })
    .catch(error =>{
      console.error('Erro: ', error);
      alert('Erro ao se comunicar com o servidor!');
    })
  }
</script>
</body>
</html>